angular.module("employeeTracker",["ui.router","ngCookies","ui.bootstrap","AxelSoft","ngStomp"]),angular.module("employeeTracker").config(["$stateProvider","$urlRouterProvider","$locationProvider",function(e,t,o){t.otherwise("/"),e.state("home",{url:"/",templateUrl:"/ActivityTracker/app/partials/home.html",controller:"DashboardController",resolve:{isLoggedIn:["$q","Access",function(e,t){var o=e.defer();return t.isAuthenticated()?o.resolve():o.reject(),o.promise}]}}).state("login",{url:"/login",templateUrl:"/ActivityTracker/app/partials/login.html",controller:"LoginController",resolve:{isLoggedIn:["$q","Access",function(e,t){var o=e.defer();return t.isAuthenticated()?o.reject():o.resolve(),o.promise}]}}).state("tasks",{url:"/tasks",templateUrl:"/ActivityTracker/app/partials/task.html",controller:"TaskController",resolve:{isAdmin:["$q","Access",function(e,t){var o=e.defer();return t.isAuthenticated()&&"ADMIN"==t.getUser().role.role?o.resolve():o.reject(),o.promise}]}}).state("employees",{url:"/employees",templateUrl:"/ActivityTracker/app/partials/employee.html",controller:"EmployeeController",resolve:{isAdmin:["$q","Access",function(e,t){var o=e.defer();return t.isAuthenticated()&&"ADMIN"==t.getUser().role.role?o.resolve():o.reject(),console.log(t.getUser().role.role),console.log(t.isAuthenticated()&&"ADMIN"==t.getUser().role.role),o.promise}]}}).state("groups",{url:"/groups",templateUrl:"/ActivityTracker/app/partials/group2.html",controller:"GroupController",resolve:{isNotUser:["$q","Access",function(e,t){var o=e.defer();return t.isAuthenticated()&&"USER"!=t.getUser().role.role?o.resolve():o.reject(),o.promise}]}}).state("accounts",{url:"/accounts",templateUrl:"/ActivityTracker/app/partials/account.html",controller:"AccountController",resolve:{isLoggedIn:["$q","Access",function(e,t){var o=e.defer();return t.isAuthenticated()&&"ADMIN"==t.getUser().role.role?o.resolve():o.reject(),o.promise}]}}).state("profile",{url:"/profile",templateUrl:"/ActivityTracker/app/partials/profile.html",controller:"ProfileController",resolve:{isNotUser:["$q","Access",function(e,t){var o=e.defer();return t.isAuthenticated()?o.resolve():o.reject(),o.promise}]}}).state("group-detail",{url:"/group-detail",templateUrl:"/ActivityTracker/app/partials/group-detail.html",controller:"GroupDetailController",params:{group:null}})}]),angular.module("employeeTracker").run(["$state","$cookies","$http","LoginDataOp","Access",function(e,t,o,r,n){token=t.get("tracker-token"),n.getClaimsFromToken(token).then(function(r){console.log("Getting claims from token"),data=r.data,o.defaults.headers.common.Authorization="Bearer "+token,t.put("tracker-token",token),console.log(data),n.user(data.principal.user),e.go("home")}).catch(function(t){console.log(t),e.go("login")})}]),angular.module("employeeTracker").controller("AccountController",["$rootScope","$cookies","$scope","$state","$filter","AccountDataOp","EmployeeDataOp","Access",function(e,t,o,r,n,a,s,c){function i(){a.getAccountList().then(function(e){o.itemList=e.data,o.totalItems=o.itemList.length;var t=(o.currentPage-1)*o.numPerPage,r=t+o.numPerPage;o.filteredList=o.itemList.slice(t,r)}).catch(function(e){console.log(e)})}function u(){o.totalItems=o.itemList.length;var e=(o.currentPage-1)*o.numPerPage,t=e+o.numPerPage;o.filteredList=o.itemList.slice(e,t)}o.itemList=[],o.filteredList=[],o.item={},o.newItem={},o.selectedItem={},o.employeeList=[],o.selectedEmployee={},o.roleList=[],o.totalItems=null,o.currentPage=1,o.maxSize=5,o.numPerPage=10,o.search_keyword="",o.employee_search="",o.error="",o.success_msg="",o.numPerPageCap=[10,25,50,100],o.pageCap=o.numPerPageCap[0],o.numPerPage=o.numPerPageCap[0],o.newItem={user:{role:{}},employee:{}},o.changeNumPerPage=function(){o.numPerPage=o.pageCap,u()},i(),o.loadAccount=function(){o.error="",s.getEmployeeList().then(function(e){o.employeeList=e.data}).catch(function(e){console.log(e)}),a.getRoleList().then(function(e){o.roleList=e.data,o.newItem.user.role=o.roleList.length>0?o.roleList[0]:{}}).catch(function(e){console.log(e)})},o.searchItem=function(){if(""==o.search_keyword)u();else{o.searchList=n("filter")(o.itemList,o.search_keyword),o.totalItems=o.searchList.length;var e=(o.currentPage-1)*o.numPerPage,t=e+o.numPerPage;o.filteredList=o.searchList.slice(e,t)}},o.setPage=function(e){o.currentPage=e},o.pageChanged=function(){var e=(o.currentPage-1)*o.numPerPage,t=e+o.numPerPage;o.filteredList=o.itemList.slice(e,t)},o.setSelectedItem=function(e){o.selectedItem=e},o.showModal=function(){o.error=""},o.hideModal=function(){o.error=""},o.addAccount=function(){o.error="",angular.equals({},o.newItem.employee)?(o.error="Please select an employee",console.log("empty object")):a.addAccount(o.newItem).then(function(e){o.success_message="User account added succesfully!",$("#add-account").modal("hide"),$("#successModal").modal("show"),setTimeout(function(){$("#successModal").modal("hide")},3e3),o.error="",i()}).catch(function(e){console.log(e),o.error=e.data.message})},o.updateAccount=function(){a.updateAccount(o.selectedItem).then(function(e){o.success_message="User account updated succesfully!",$("#edit-task").modal("hide"),$("#successModal").modal("show"),setTimeout(function(){$("#successModal").modal("hide")},3e3),o.error="",i()}).catch(function(e){console.log(e),o.error=e.data.message})},o.disableAccount=function(e){a.disableAccount(e).then(function(e){o.success_message="Account disabled succesfully!",$("#successModal").modal("show"),setTimeout(function(){$("#successModal").modal("hide")},3e3),o.error="",i()}).catch(function(e){o.error=e.data.message})},o.enableAccount=function(e){a.enableAccount(e).then(function(e){o.success_message="Account enabled succesfully!",$("#successModal").modal("show"),setTimeout(function(){$("#successModal").modal("hide")},3e3),o.error="",i()}).catch(function(e){o.error=e.data.message})},o.resetAccount=function(e){a.resetAccount(e).then(function(e){o.success_message="Password reset succesfully!",$("#successModal").modal("show"),setTimeout(function(){$("#successModal").modal("hide")},3e3),o.error="",i()}).catch(function(e){o.error=e.data.message})}}]),angular.module("employeeTracker").controller("EmployeeTaskController",["$rootScope","$cookies","$scope","$state","$stomp","TaskDataOp","Access",function(e,t,o,r,n,a,s){function c(){a.getMyTaskList().then(function(e){o.itemList=e.data,o.itemList.length>0&&(null==o.itemList[0].endDate?$("#add-task-btn").prop("disabled",!0):$("#add-task-btn").prop("disabled",!1)),o.totalItems=o.itemList.length;var t=(o.currentPage-1)*o.numPerPage,r=t+o.numPerPage;o.filteredList=o.itemList.slice(t,r)}).catch(function(e){console.log(e)})}o.success_message="",o.itemList=[],o.filteredList=[],o.item={},o.totalItems=null,o.currentPage=1,o.maxSize=5,o.numPerPage=10,o.search_keyword="",o.numPerPageCap=[10,25,50,100],o.pageCap=o.numPerPageCap[0],o.numPerPage=o.numPerPageCap[0],o.error="",o.success_msg="",c(),s.showNav(!0),o.search=function(){},o.changeNumPerPage=function(){o.numPerPage=o.pageCap,function(){o.totalItems=o.itemList.length;var e=(o.currentPage-1)*o.numPerPage,t=e+o.numPerPage;o.filteredList=o.itemList.slice(e,t)}()},o.setPage=function(e){o.currentPage=e},o.pageChanged=function(){var e=(o.currentPage-1)*o.numPerPage,t=e+o.numPerPage;o.filteredList=o.itemList.slice(e,t)},o.emitEvent=function(e,t){o.$emit(e,t)},o.endTask=function(e){a.endEmployeeTask(e).then(function(e){o.success_message="Task ended!",$("#add-task").modal("hide"),$("#successModal").modal("show"),setTimeout(function(){$("#successModal").modal("hide")},3e3),console.log("emitting end task event"),o.$emit("endTaskEmit",o.itemList[0]),c(),console.log(o.itemList[0])}).catch(function(e){console.log(e)})},o.taskList=[],o.selectedTask={},o.loadTask=function(){a.getTaskList().then(function(e){o.taskList=e.data,o.selectedTask=o.taskList.length>0?o.taskList[0]:{}}).catch(function(e){console.log(e)})},o.loadTask(),o.addTask=function(){a.addEmployeeTask(o.selectedTask).then(function(e){o.success_message="New task started!",$("#add-task").modal("hide"),$("#successModal").modal("show"),setTimeout(function(){$("#successModal").modal("hide")},3e3),c(),console.log(o.itemList[0]),console.log("emitting addTask event"),o.$emit("addTaskEmit",o.itemList[0])}).catch(function(e){console.log(e)})}}]),angular.module("employeeTracker").controller("EmployeeController",["$rootScope","$cookies","$scope","$state","$filter","EmployeeDataOp","Access",function(e,t,o,r,n,a,s){function c(){o.totalItems=o.itemList.length;var e=(o.currentPage-1)*o.numPerPage,t=e+o.numPerPage;o.filteredList=o.itemList.slice(e,t)}function i(){a.getEmployeeList().then(function(e){o.itemList=e.data,o.totalItems=o.itemList.length;var t=(o.currentPage-1)*o.numPerPage,r=t+o.numPerPage;o.filteredList=o.itemList.slice(t,r)}).catch(function(e){console.log(e)})}o.newItem={},o.selectedItem={},o.itemList=[],o.filteredList=[],o.item={},o.keyword="",o.totalItems=null,o.currentPage=1,o.maxSize=5,o.numPerPage=25,o.search_keyword="",o.numPerPageCap=[10,25,50,100],o.pageCap=o.numPerPageCap[0],o.numPerPage=o.numPerPageCap[0],o.error="",o.success_msg="",o.sortType="employeeNumber",o.sortReverse=!1,o.toggleSort=function(e){o.sortType=e,o.sortReverse=!o.sortReverse},i(),s.showNav(!0),o.searchItem=function(){if(""==o.search_keyword)c();else{o.searchList=n("filter")(o.itemList,o.search_keyword),o.totalItems=o.searchList.length;var e=(o.currentPage-1)*o.numPerPage,t=e+o.numPerPage;o.filteredList=o.searchList.slice(e,t)}},o.changeNumPerPage=function(){o.numPerPage=o.pageCap,c()},o.setPage=function(e){o.currentPage=e},o.pageChanged=function(){var e=(o.currentPage-1)*o.numPerPage,t=e+o.numPerPage;o.filteredList=o.itemList.slice(e,t)},o.setSelectedItem=function(e){o.selectedItem=e,console.log(e)},o.addEmployee=function(){a.addEmployee(o.newItem).then(function(e){o.success_message="Employee added succesfully!",$("#add-employee").modal("hide"),$("#successModal").modal("show"),setTimeout(function(){$("#successModal").modal("hide")},3e3),i()}).catch(function(e){console.log(e),o.error=e.data.message})},o.editEmployee=function(){a.editEmployee(o.selectedItem).then(function(e){o.success_message="Employee updated succesfully!",$("#edit-employee").modal("hide"),$("#successModal").modal("show"),setTimeout(function(){$("#successModal").modal("hide")},3e3),i()}).catch(function(e){console.log(e),o.error=e.data.message})},$("#edit-employee").on("hidden.bs.modal",function(){})}]),angular.module("employeeTracker").controller("GroupDetailController",["$rootScope","$scope","$cookies","$state","$stateParams","Access",function(e,t,o,r,n,a){token=o.get("tracker-token"),void 0==token?r.go("landing"):a.getClaimsFromToken(token).then(function(e){data=e.data,data.authenticated&&(a.user(data.principal.user),"SUPERVISOR"!=data.principal.user.role.role&&r.go("home"))}).catch(function(e){o.remove("tracker-token"),a.user(void 0),r.go("landing")}),null==n.group&&r.go("home"),t.group=n.group,t.memberList=[],t.adminList=[],t.adminList=t.group.admin,t.memberList=t.group.members,console.log(t.adminList)}]),angular.module("employeeTracker").controller("GroupController",["$rootScope","$scope","$cookies","$state","GroupDataOp","Access",function(e,t,o,r,n,a){function s(){t.error="",n.getGroupList().then(function(e){t.itemList=e.data,t.totalItems=t.itemList.length;var o=(t.currentPage-1)*t.numPerPage,r=o+t.numPerPage;t.filteredList=t.itemList.slice(o,r)}).catch(function(e){console.log(e)})}t.itemList=[],t.filteredList=[],t.item={},t.newItem={},t.adminList=[],t.memberList=[],t.totalItems=null,t.currentPage=1,t.maxSize=5,t.numPerPage=10,t.search_keyword="",t.error="",t.success_msg="",t.numPerPageCap=[10,25,50,100],t.pageCap=t.numPerPageCap[0],t.numPerPage=t.numPerPageCap[0],s(),t.newItem={group:{},admin:{},member:{},groupName:"",groupEmployee:{group:{},employeeUser:{}}},t.newGroup={groupName:""},t.selectedGroup={},a.showNav(!0),t.search=function(){},t.setSelectedGroup=function(e){t.error="",t.selectedGroup=e},t.setSelectedMember=function(e,o){t.error="",t.selectedMember.group=e,t.selectedMember.employeeUser=o},t.setSelectedAdmin=function(e,o){t.error="",t.selectedAdmin.group=e,t.selectedAdmin.employeeUser=o},t.setPage=function(e){t.currentPage=e},t.pageChanged=function(){var e=(t.currentPage-1)*t.numPerPage,o=e+t.numPerPage;t.filteredList=t.itemList.slice(e,o)},t.showGroup=function(e){r.go("group-detail",{group:e})},t.$on("groupUpdateBroadcast",function(e,t){console.log("groupUpdate broadcast event received groupController"),s()}),t.addGroup=function(){t.error="",n.addGroup(t.newGroup).then(function(e){console.log(e),t.success_message="Group added succesfully!",$("#add-group").modal("hide"),$("#successModal").modal("show"),setTimeout(function(){$("#successModal").modal("hide")},3e3),console.log("emiting group event"),t.$emit("groupUpdateEmit",t.newGroup),s()}).catch(function(e){console.log(e),t.error=e.data.message})},t.editGroup=function(){t.error="",n.editGroup(t.selectedGroup).then(function(e){console.log(e),t.success_message="Group updated succesfully!",$("#edit-group").modal("hide"),$("#successModal").modal("show"),setTimeout(function(){$("#successModal").modal("hide")},3e3),console.log("emiting group event"),t.$emit("groupUpdateEmit",t.selectedGroup),s()}).catch(function(e){console.log(e),t.error=e.data.message})},t.addMember=function(){console.log(t.newItem.groupEmployee),t.error="",jQuery.isEmptyObject(t.newItem.groupEmployee.employeeUser)?t.error="Please select a member":n.addMember(t.newItem.groupEmployee).then(function(e){console.log(e),t.success_message="Member added succesfully!",$("#add-member").modal("hide"),$("#successModal").modal("show"),setTimeout(function(){$("#successModal").modal("hide")},3e3),t.$emit("groupUpdateEmit",t.newItem.groupEmployee.group),t.newItem.groupEmployee={},s()}).catch(function(e){console.log(e)})},t.removeMember=function(e,o){groupEmployee={group:e,employeeUser:o},console.log(groupEmployee),n.removeMember(groupEmployee).then(function(o){console.log(o),t.success_message="Member removed succesfully!",$("#successModal").modal("show"),setTimeout(function(){$("#successModal").modal("hide")},3e3),t.$emit("groupUpdateEmit",e),s()}).catch(function(e){console.log(e)})},t.addAdmin=function(){t.error="",jQuery.isEmptyObject(t.newItem.groupEmployee.employeeUser)?t.error="Please select an admin":n.addAdmin(t.newItem.groupEmployee).then(function(e){console.log(e),t.success_message="Admin added succesfully!",$("#add-admin").modal("hide"),$("#successModal").modal("show"),setTimeout(function(){$("#successModal").modal("hide")},3e3),t.$emit("groupUpdateEmit",t.newItem.groupEmployee.group),t.newItem.groupEmployee={},s()}).catch(function(e){console.log(e)})},t.removeAdmin=function(e,o){groupEmployee={group:e,employeeUser:o},n.removeAdmin(groupEmployee).then(function(o){console.log(o),t.success_message="Admin removed succesfully!",$("#successModal").modal("show"),setTimeout(function(){$("#successModal").modal("hide")},3e3),t.$emit("groupUpdateEmit",e),s()}).catch(function(e){console.log(e)})},t.loadMemberSelection=function(e){t.error="",n.getAvailableMembers(e).then(function(o){console.log(o),t.memberList=o.data,t.newItem.groupEmployee.group=e}).catch(function(e){console.log(e)})},t.loadAdminSelection=function(e){t.error="",n.getAvailableAdmins(e).then(function(o){console.log(o),t.adminList=o.data,t.newItem.groupEmployee.group=e}).catch(function(e){console.log(e)})}}]),angular.module("employeeTracker").controller("DashboardController",["$rootScope","$cookies","$scope","$state","$stomp","TaskDataOp","Access","SocketService",function(e,t,o,r,n,a,s,c){s.showNav(!0),o.itemList=[],o.filteredList=[],o.item={},o.totalItems=null,o.currentPage=1,o.maxSize=5,o.numPerPage=10,o.search_keyword="",o.error="",o.success_msg="",o.stompClient=null,o.isAdmin=function(){return void 0!=s.getUser()&&"ADMIN"==s.getUser().role.role},o.isSupervisor=function(){return void 0!=s.getUser()&&"SUPERVISOR"==s.getUser().role.role},o.isUser=function(){return void 0!=s.getUser()&&"USER"==s.getUser().role.role},o.isAuthenticated=function(){return s.isAuthenticated()},o.setPage=function(e){o.currentPage=e},s.isAuthenticated()||r.go("login"),o.pageChanged=function(){var e=(o.currentPage-1)*o.numPerPage,t=e+o.numPerPage;o.filteredList=o.itemList.slice(e,t)}}]),angular.module("employeeTracker").controller("LandingPageController",["$rootScope","$cookies","$scope","$state","Access",function(e,t,o,r,n){o.user=n.getUser(),o.isAuthenticated=function(){return n.isAuthenticated()},o.logout=function(){n.user(void 0),t.remove("tracker-token"),r.go("landing")}}]),angular.module("employeeTracker").controller("LoginController",["$rootScope","$scope","$state","$cookies","$http","Access","LoginDataOp",function(e,t,o,r,n,a,s){t.user={},t.error="",t.login=function(){s.login(t.user).then(function(e){token=e.data.access_token,a.getClaimsFromToken(token).then(function(e){data=e.data,r.put("tracker-token",token),a.user(data.principal.user),n.defaults.headers.common.Authorization="Bearer "+token,o.go("home")}).catch(function(e){console.log(e),t.error=e.data.message})}).catch(function(e){console.log(e),t.error=e.data.message})}}]),angular.module("employeeTracker").controller("MainController",["$rootScope","$scope","$state","$stomp","Access",function(e,t,o,r,n){console.log("Main Controller"),t.canShowNav=function(){switch(visible=!0,o.current.name){case"":case"landing":case"login":visible=!1;break;default:visible=!0}return visible},t.isAuthenticated=function(){return n.isAuthenticated()};t.messages=[],t.message="",t.max=140,t.connect=function(){r.connect("/ActivityTracker/activity-socket",{}).then(function(e){r.subscribe("/user-update/status",function(e,o,r){console.log("Sending broadcast for user status"),t.broadcast("taskUpdate",e)}),r.subscribe("/user-update/group",function(e,o,r){console.log("sending broadcast for group status main controller"),t.broadcast("groupUpdateBroadcast",e)})})},t.connect(),t.sendMessage=function(e){console.log("sending user status message"),r.send("/app/user-status",e,{})},t.sendGroupUpdate=function(e){r.send("/app/group-status",e,{})},t.broadcast=function(e,o){t.$broadcast(e,o)},t.$on("eventEmitedName",function(e,o){console.log(o),t.sendMessage(o)}),t.$on("endTaskEmit",function(e,t){r.send("/app/user-status",t,{}),console.log("endTask emit event received")}),t.$on("addTaskEmit",function(e,t){r.send("/app/user-status",t,{}),console.log("addTask emit event received")}),t.$on("groupUpdateEmit",function(e,o){console.log("groupUpdate emit event received"),t.sendGroupUpdate(o)})}]),angular.module("employeeTracker").controller("NavController",["$rootScope","$cookies","$scope","$state","Access",function(e,t,o,r,n){o.user={},o.error="",o.logout=function(){n.user(void 0),t.remove("tracker-token"),r.go("login")},o.isAdmin=function(){return void 0!=n.getUser()&&"ADMIN"==n.getUser().role.role},o.isUser=function(){return void 0!=n.getUser()&&"USER"==n.getUser().role.role},o.isAuthenticated=function(){return n.isAuthenticated()}}]),angular.module("employeeTracker").controller("ProfileController",["$scope","$state","Access","AccountDataOp",function(e,t,o,r){e.profile=o.getUser(),e.newPassword="",e.confirmNewPassword="",e.userName=e.profile.username,console.log(e.profile),e.updateProfile=function(){e.error="",user={id:e.profile.id,password:e.newPassword},e.newPassword!=e.confirmNewPassword&&(e.error="password mismatched"),e.newPassword.length<8&&(e.error="password must be at least 8 characters"),""==e.error&&r.updateUser(user).then(function(t){e.success_message="Password updated succesfully!",$("#update-profile").modal("hide"),$("#successModal").modal("show"),setTimeout(function(){$("#successModal").modal("hide")},3e3),e.error=""}).catch(function(e){console.log(e)})}}]),angular.module("employeeTracker").controller("SubbordinateController",["$rootScope","$cookies","$scope","$state","$stomp","GroupDataOp","Access",function(e,t,o,r,n,a,s){function c(){a.getSubordinateTaskList().then(function(e){o.itemList=e.data,o.totalItems=o.itemList.length;var t=(o.currentPage-1)*o.numPerPage,r=t+o.numPerPage;o.filteredList=o.itemList.slice(t,r)}).catch(function(e){console.log(e)})}o.success_message="",o.itemList=[],o.filteredList=[],o.item={},o.totalItems=null,o.currentPage=1,o.maxSize=5,o.numPerPage=10,o.search_keyword="",o.numPerPageCap=[10,25,50,100],o.pageCap=o.numPerPageCap[0],o.numPerPage=o.numPerPageCap[0],o.error="",o.success_msg="",s.showNav(!0),o.search=function(){},o.changeNumPerPage=function(){o.numPerPage=o.pageCap,function(){o.totalItems=o.itemList.length;var e=(o.currentPage-1)*o.numPerPage,t=e+o.numPerPage;o.filteredList=o.itemList.slice(e,t)}()},o.setPage=function(e){o.currentPage=e},o.pageChanged=function(){var e=(o.currentPage-1)*o.numPerPage,t=e+o.numPerPage;o.filteredList=o.itemList.slice(e,t)},o.$on("taskUpdate",function(e,t){console.log("Group update broadcast received subbordinate controller"),c()}),o.$on("groupUpdateBroadcast",function(e,t){console.log("Group update broadcast received subbordinate controller"),c()}),o.$on("groupUpdate",function(e,t){console.log("Group update broadcast received subordinate controller"),c()}),c()}]),angular.module("employeeTracker").controller("TaskController",["$rootScope","$cookies","$scope","$state","$filter","TaskDataOp","Access",function(e,t,o,r,n,a,s){function c(){a.getTaskList().then(function(e){o.itemList=e.data,o.totalItems=o.itemList.length;var t=(o.currentPage-1)*o.numPerPage,r=t+o.numPerPage;o.filteredList=o.itemList.slice(t,r)}).catch(function(e){console.log(e)})}function i(){o.totalItems=o.itemList.length;var e=(o.currentPage-1)*o.numPerPage,t=e+o.numPerPage;o.filteredList=o.itemList.slice(e,t)}o.itemList=[],o.filteredList=[],o.item={},o.newItem={},o.selectedItem={},o.totalItems=null,o.currentPage=1,o.maxSize=5,o.numPerPage=10,o.search_keyword="",o.error="",o.success_msg="",o.numPerPageCap=[10,25,50,100],o.pageCap=o.numPerPageCap[0],o.numPerPage=o.numPerPageCap[0],o.changeNumPerPage=function(){o.numPerPage=o.pageCap,i()},c(),o.searchItem=function(){if(""==o.search_keyword)i();else{o.searchList=n("filter")(o.itemList,o.search_keyword),o.totalItems=o.searchList.length;var e=(o.currentPage-1)*o.numPerPage,t=e+o.numPerPage;o.filteredList=o.searchList.slice(e,t)}},o.setPage=function(e){o.currentPage=e},o.pageChanged=function(){var e=(o.currentPage-1)*o.numPerPage,t=e+o.numPerPage;o.filteredList=o.itemList.slice(e,t)},o.setSelectedItem=function(e){o.selectedItem=e},o.addTask=function(){a.addTask(o.newItem).then(function(e){o.success_message="Task added succesfully!",$("#add-task").modal("hide"),$("#successModal").modal("show"),setTimeout(function(){$("#successModal").modal("hide")},3e3),o.error="",c()}).catch(function(e){console.log(e),o.error=e.data.message})},o.editTask=function(){a.updateTask(o.selectedItem).then(function(e){o.success_message="Task updated succesfully!",$("#edit-task").modal("hide"),$("#successModal").modal("show"),setTimeout(function(){$("#successModal").modal("hide")},3e3),o.error="",c()}).catch(function(e){console.log(e),o.error=e.data.message})}}]),angular.module("employeeTracker").factory("Access",["$http",function(e){var t=this;t.user=void 0,t.visible=!1;return{user:function(e){t.user=e},getUser:function(){return t.user},showNav:function(e){t.visible=e},canShowNav:function(){return t.visible},isAuthenticated:function(){return null!=t.user&&void 0!=t.user},getClaimsFromToken:function(t){return e({method:"POST",url:"/ActivityTracker/user-claims",headers:{Authorization:"Bearer "+t}})}}}]),angular.module("employeeTracker").factory("AccountDataOp",["$http",function(e){var t={};return t.getAccountList=function(){return e({method:"GET",url:"/ActivityTracker/accounts",headers:{"Content-Type":"application/json; charset=UTF-8"}})},t.getRoleList=function(){return e({method:"GET",url:"/ActivityTracker/accounts/roles",dataType:"json",headers:{"Content-Type":"application/json; charset=UTF-8"}})},t.addAccount=function(t){return e({method:"POST",url:"/ActivityTracker/accounts",dataType:"json",data:t,headers:{"Content-Type":"application/json; charset=UTF-8"}})},t.updateAccount=function(t){return e({method:"PUT",url:"/ActivityTracker/accounts",dataType:"json",data:t,headers:{"Content-Type":"application/json; charset=UTF-8"}})},t.updateUser=function(t){return e({method:"POST",url:"/ActivityTracker/accounts/updateUser",dataType:"json",data:t,headers:{"Content-Type":"application/json; charset=UTF-8"}})},t.resetAccount=function(t){return e({method:"POST",url:"/ActivityTracker/accounts/resetpassword",dataType:"json",data:t,headers:{"Content-Type":"application/json; charset=UTF-8"}})},t.disableAccount=function(t){return e({method:"POST",url:"/ActivityTracker/accounts/disable",dataType:"json",data:t,headers:{"Content-Type":"application/json; charset=UTF-8"}})},t.enableAccount=function(t){return e({method:"POST",url:"/ActivityTracker/accounts/enable",dataType:"json",data:t,headers:{"Content-Type":"application/json; charset=UTF-8"}})},t}]),angular.module("employeeTracker").factory("EmployeeDataOp",["$http",function(e){var t={};return t.getEmployeeList=function(){return e({method:"GET",url:"/ActivityTracker/employees",dataType:"json",headers:{"Content-Type":"application/json; charset=UTF-8"}})},t.addEmployee=function(t){return e({method:"POST",url:"/ActivityTracker/employees/addEmployee",dataType:"json",data:t,headers:{"Content-Type":"application/json; charset=UTF-8"}})},t.editEmployee=function(t){return e({method:"PUT",url:"/ActivityTracker/employees/editEmployee",dataType:"json",data:t,headers:{"Content-Type":"application/json; charset=UTF-8"}})},t}]),angular.module("employeeTracker").factory("GroupDataOp",["$http",function(e){var t={};return t.getGroupList=function(){return e({method:"GET",url:"/ActivityTracker/groups",dataType:"json",headers:{"Content-Type":"application/json; charset=UTF-8"}})},t.addGroup=function(t){return e({method:"POST",url:"/ActivityTracker/groups",dataType:"json",data:t,headers:{"Content-Type":"application/json; charset=UTF-8"}})},t.editGroup=function(t){return e({method:"PUT",url:"/ActivityTracker/groups",dataType:"json",data:t,headers:{"Content-Type":"application/json; charset=UTF-8"}})},t.getSubordinateTaskList=function(){return e({method:"GET",url:"/ActivityTracker/group-task",dataType:"json",headers:{"Content-Type":"application/json; charset=UTF-8"}})},t.getAvailableMembers=function(t){return e({method:"POST",url:"/ActivityTracker/group-members",dataType:"json",data:t,headers:{"Content-Type":"application/json; charset=UTF-8"}})},t.getAvailableAdmins=function(t){return e({method:"POST",url:"/ActivityTracker/group-admins",dataType:"json",data:t,headers:{"Content-Type":"application/json; charset=UTF-8"}})},t.addMember=function(t){return e({method:"POST",url:"/ActivityTracker/groups/addMember",dataType:"json",data:t,headers:{"Content-Type":"application/json; charset=UTF-8"}})},t.removeMember=function(t){return e({method:"POST",url:"/ActivityTracker/groups/removeMember",dataType:"json",data:t,headers:{"Content-Type":"application/json; charset=UTF-8"}})},t.addAdmin=function(t){return e({method:"POST",url:"/ActivityTracker/groups/addAdmin",dataType:"json",data:t,headers:{"Content-Type":"application/json; charset=UTF-8"}})},t.removeAdmin=function(t){return e({method:"POST",url:"/ActivityTracker/groups/removeAdmin",dataType:"json",data:t,headers:{"Content-Type":"application/json; charset=UTF-8"}})},t}]),angular.module("employeeTracker").factory("DashboardDataOp",["$http",function(e){return{}}]),angular.module("employeeTracker").factory("LandingDataOp",["$http",function(e){return{}}]),angular.module("employeeTracker").factory("LoginDataOp",["$http",function(e){var t={};return t.login=function(t){return e({method:"POST",url:"/ActivityTracker/authenticate",dataType:"json",data:t,headers:{"Content-Type":"application/json; charset=UTF-8"}})},t.getClaimsFromToken=function(t){return e({url:"/ActivityTracker/user-claims",headers:{Authorization:"Bearer "+t}})},t}]),angular.module("employeeTracker").service("SocketService",["$stomp",function(e){var t={};return t.subscribe=function(t){e.subscribe("/queue/test",t)},t.send=function(t){e.send("/app/user-status",t,{priority:9,custom:42})},t}]),angular.module("employeeTracker").factory("TaskDataOp",["$http",function(e){var t={};return t.getTaskList=function(){return e({method:"GET",url:"/ActivityTracker/tasks",dataType:"json",headers:{"Content-Type":"application/json; charset=UTF-8"}})},t.addTask=function(t){return e({method:"POST",url:"/ActivityTracker/tasks",dataType:"json",data:t,headers:{"Content-Type":"application/json; charset=UTF-8"}})},t.updateTask=function(t){return e({method:"PUT",url:"/ActivityTracker/tasks",dataType:"json",data:t,headers:{"Content-Type":"application/json; charset=UTF-8"}})},t.getEmployeeTaskList=function(){return e({method:"GET",url:"/ActivityTracker/employee-tasks",dataType:"json",headers:{"Content-Type":"application/json; charset=UTF-8"}})},t.getMyTaskList=function(){return e({method:"POST",url:"/ActivityTracker/employee-tasks/myTasks",dataType:"json",headers:{"Content-Type":"application/json; charset=UTF-8"}})},t.addEmployeeTask=function(t){return e({method:"POST",url:"/ActivityTracker/employee-tasks/addTask",dataType:"json",data:t,headers:{"Content-Type":"application/json; charset=UTF-8"}})},t.endEmployeeTask=function(t){return e({method:"POST",url:"/ActivityTracker/employee-tasks/endTask",dataType:"json",data:t,headers:{"Content-Type":"application/json; charset=UTF-8"}})},t}]),angular.module("employeeTracker").service("WebSocketService",["$q","$timeout",function(e,t){var o={},r=e.defer(),n={client:null,stomp:null},a=[];o.RECONNECT_TIMEOUT=3e4,o.SOCKET_URL="/ActivityTracker/gs-guide-websocket",o.CHAT_TOPIC="/user-update/status",o.CHAT_BROKER="/app/user-update",o.receive=function(){return r.promise},o.subscribe=function(e){n.stomp.subscribe(o.CHAT_TOPIC,function(t){e(t)})},o.send=function(e){var t=Math.floor(1e6*Math.random());n.stomp.send(o.CHAT_BROKER,{priority:9},JSON.stringify({message:e,id:t})),a.push(t)};var s=function(){n.client=new SockJS(o.SOCKET_URL),n.stomp=Stomp.over(n.client),n.stomp.connect({},function(){n.stomp.subscribe(o.CHAT_TOPIC,function(e){r.notify(function(e){var t=JSON.parse(e),o={};return o.message=t.message,o.time=new Date(t.time),_.contains(a,t.id)&&(o.self=!0,a=_.remove(a,t.id)),o}(e.body))})}),n.stomp.onclose=function(){t(function(){s()},this.RECONNECT_TIMEOUT)}};return s(),o}]);